<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>US States</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css"
    integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin=""/>

    <!-- Leaflet JavaScript code -->
    <!-- <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
    integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
    crossorigin=""></script> -->

    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <!-- D3 library -->
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <!-- Our CSS-->
         <link rel="stylesheet" type="text/css" href="../static/css/style.css"> 

  </head>
    <h1>{{statedb.StateName}}</h1>
    <!-- map div -->
    <div id="plot"></div>
    <!-- <div id="map"></div> -->
    
    <!-- <script type="text/javascript" src="../static/js/plots.js"></script> -->
    <script>
    
      
  
  
  function PlotState(state){
      year = [2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020]
      
      d3.json("../static/data/state_data.json").then(function(dataset) {
      console.log(dataset)
      var state_dict = dataset;
  
      var gdp_trace = {
      x: year,
      y: {{statedb.GDP}},
      type: 'line', 
      name: "GDP ($10,000)"
      };
  
      var hs_trace = {
          x: year,
          y: {{statedb['High School']}},
          type: 'line', 
          name: "High school graduation rate"
      };
  
      var college_trace = {
          x: year,
          y: {{statedb.College}},
          type: 'line', 
          name: "Bachelor's or higher rate"
      };
  
      var employment_trace = {
          x: year,
          y: {{statedb['Employment Rate']}},
          type: 'line',
          name: "Employment rate"
      };
  
      // let happiness_trace = {
      //     x: year,
      //     y: state['GDP'],
      //     type: 'line'
      // };
  
      let data = [gdp_trace, hs_trace,college_trace,employment_trace];
  
      let layout = {
      title: "Happiness of " + state
      };
  
      Plotly.newPlot("plot", data, layout);
  })};
  PlotState('{{state}}')
  
  </script>
    
    <!-- <script type="text/javascript" src="static/js/logic.js"></script> -->


  </body>
</html>
